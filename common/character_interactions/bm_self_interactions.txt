bm_cast_blood_magic_self_minor = {
    category = interaction_category_friendly
    auto_accept = yes
    common_interaction = yes
    interface_priority = 999
    send_name = bm_cast_blood_magic_self_minor
    desc = bm_cast_blood_magic_self_minor_desc

    is_shown = {
        scope:actor = { has_trait = lifestyle_blood_mage }
        scope:actor = scope:recipient 
    }
    is_valid_showing_failures_only = { 
        scope:actor = { has_character_modifier = lifeforce_modifier_minor }
    }
    send_options_exclusive = yes


    send_option = { # Channel minor lifeforce
        localization = bm_cast_blood_magic_self_minor.channel_minor
        flag = channel_minor
        is_valid = {
            scope:actor = {piety >= 75}
        }
    }
    send_option = { # Attune lifeforce
        localization = bm_cast_blood_magic_self_minor.attune_lifeforce
        flag = attune_lifeforce
        is_valid = {
            scope:actor = {piety >= 25}
        }
    }
    on_accept = {
        scope:actor = {
            if = { # Channel minor lifeforce
                limit = {scope:channel_minor = yes}
                trigger_event = { id = bm_channel_lifeforce_enlightenment_minor.001 }
                remove_character_modifier = lifeforce_modifier_minor
                add_xp_enlightenment = yes
                add_piety = -75
                custom_tooltip = channel_lifeforce_enlightenment_minor.effects_list
            }
            if = { # Attune lifeforce
                limit = {scope:attune_lifeforce = yes}
                trigger_event = { id = bm_attune_lifeforce.001 } 
                remove_character_modifier = lifeforce_modifier_minor
                add_piety = -25
                custom_tooltip = bm_attune_lifeforce.effects_list
            }
        }
    }

    ai_frequency = 6
    ai_will_do = {
        base = 0
        ai_modifier_based_on_health = yes
    }
}


bm_cast_blood_magic_self_major = {
    category = interaction_category_friendly
    auto_accept = yes
    common_interaction = yes
    interface_priority = 999

    is_shown = {
        scope:actor = { has_trait = lifestyle_blood_mage }
        scope:actor = scope:recipient 
    }
    is_valid_showing_failures_only = { 
        scope:actor = { has_character_modifier = lifeforce_modifier_major }
    }
    send_options_exclusive = yes


    send_option = {
        localization = "Improve Education"
        flag = improve_education
    }

    on_accept = {
        scope:actor = {
            remove_character_modifier = lifeforce_modifier_major
            if = {
                limit = {scope:improve_education = yes}
                trigger_event = { id = bm_education_enhancement.001 } 
            }
        }
    }


    ai_frequency = 6
    ai_will_do = {
        base = 0
        ai_modifier_based_on_health = yes
    }
}
